{"ast":null,"code":"var _jsxFileName = \"/Users/bagjimin/Desktop/aichatbot-project/frontend/src/components/AuthActions.jsx\",\n  _s = $RefreshSig$();\n// src/components/AuthActions.jsx\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// 기본 백엔드 API (PDF 분석 등 FastAPI용)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000\";\n\n// ✅ 카카오 인증 처리용 Flask 서버\nconst KAKAO_API_BASE = \"http://localhost:8001\";\nexport default function AuthActions() {\n  _s();\n  const navigate = useNavigate();\n  const [busy, setBusy] = useState(false);\n  const post = async path => {\n    if (busy) return;\n    setBusy(true);\n    try {\n      // ✅ 카카오 관련 요청이면 Flask 서버로 보냄\n      const isKakaoAuth = [\"/auth/kakao/logout\", \"/auth/kakao/unlink\"].includes(path);\n      const targetBase = isKakaoAuth ? KAKAO_API_BASE : API_BASE;\n      const res = await fetch(`${targetBase}${path}`, {\n        method: \"POST\",\n        credentials: \"include\" // 쿠키 포함 필수!\n      });\n      if (!res.ok) {\n        const t = await res.text().catch(() => \"\");\n        throw new Error(t || `Request failed: ${res.status}`);\n      }\n\n      // 요청 성공 시 → 로그인 화면으로\n      navigate(\"/login\", {\n        replace: true\n      });\n    } catch (err) {\n      console.error(err);\n      alert(\"요청 실패: \" + ((err === null || err === void 0 ? void 0 : err.message) || err));\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.wrap,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      style: styles.lightBtn,\n      onClick: () => post(\"/auth/kakao/logout\"),\n      disabled: busy,\n      title: \"\\uC138\\uC158\\uB9CC \\uC885\\uB8CC\",\n      children: busy ? \"처리 중...\" : \"로그아웃\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: styles.dangerBtn,\n      onClick: () => post(\"/auth/kakao/unlink\"),\n      disabled: busy,\n      title: \"\\uCE74\\uCE74\\uC624-\\uC571 \\uC5F0\\uACB0 \\uD574\\uC81C\",\n      children: busy ? \"처리 중...\" : \"연결해제\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthActions, \"8xPUgrzQntJQH9IWhMY3k3MOw2E=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthActions;\nconst styles = {\n  wrap: {\n    display: \"flex\",\n    gap: 8,\n    alignItems: \"center\"\n  },\n  lightBtn: {\n    padding: \"10px 14px\",\n    borderRadius: 10,\n    border: \"1px solid #ddd\",\n    background: \"#fff\",\n    cursor: \"pointer\",\n    fontWeight: 600\n  },\n  dangerBtn: {\n    padding: \"10px 14px\",\n    borderRadius: 10,\n    border: \"1px solid #d33\",\n    background: \"#ffefef\",\n    color: \"#a00\",\n    cursor: \"pointer\",\n    fontWeight: 700\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"AuthActions\");","map":{"version":3,"names":["React","useState","useNavigate","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","KAKAO_API_BASE","AuthActions","_s","navigate","busy","setBusy","post","path","isKakaoAuth","includes","targetBase","res","fetch","method","credentials","ok","t","text","catch","Error","status","replace","err","console","error","alert","message","style","styles","wrap","children","lightBtn","onClick","disabled","title","fileName","_jsxFileName","lineNumber","columnNumber","dangerBtn","_c","display","gap","alignItems","padding","borderRadius","border","background","cursor","fontWeight","color","$RefreshReg$"],"sources":["/Users/bagjimin/Desktop/aichatbot-project/frontend/src/components/AuthActions.jsx"],"sourcesContent":["// src/components/AuthActions.jsx\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// 기본 백엔드 API (PDF 분석 등 FastAPI용)\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:8000\";\n\n// ✅ 카카오 인증 처리용 Flask 서버\nconst KAKAO_API_BASE = \"http://localhost:8001\";\n\nexport default function AuthActions() {\n  const navigate = useNavigate();\n  const [busy, setBusy] = useState(false);\n\n  const post = async (path) => {\n    if (busy) return;\n    setBusy(true);\n    try {\n      // ✅ 카카오 관련 요청이면 Flask 서버로 보냄\n      const isKakaoAuth = [\"/auth/kakao/logout\", \"/auth/kakao/unlink\"].includes(path);\n      const targetBase = isKakaoAuth ? KAKAO_API_BASE : API_BASE;\n\n      const res = await fetch(`${targetBase}${path}`, {\n        method: \"POST\",\n        credentials: \"include\", // 쿠키 포함 필수!\n      });\n\n      if (!res.ok) {\n        const t = await res.text().catch(() => \"\");\n        throw new Error(t || `Request failed: ${res.status}`);\n      }\n\n      // 요청 성공 시 → 로그인 화면으로\n      navigate(\"/login\", { replace: true });\n    } catch (err) {\n      console.error(err);\n      alert(\"요청 실패: \" + (err?.message || err));\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    <div style={styles.wrap}>\n      <button\n        style={styles.lightBtn}\n        onClick={() => post(\"/auth/kakao/logout\")}\n        disabled={busy}\n        title=\"세션만 종료\"\n      >\n        {busy ? \"처리 중...\" : \"로그아웃\"}\n      </button>\n\n      <button\n        style={styles.dangerBtn}\n        onClick={() => post(\"/auth/kakao/unlink\")}\n        disabled={busy}\n        title=\"카카오-앱 연결 해제\"\n      >\n        {busy ? \"처리 중...\" : \"연결해제\"}\n      </button>\n    </div>\n  );\n}\n\nconst styles = {\n  wrap: { display: \"flex\", gap: 8, alignItems: \"center\" },\n  lightBtn: {\n    padding: \"10px 14px\",\n    borderRadius: 10,\n    border: \"1px solid #ddd\",\n    background: \"#fff\",\n    cursor: \"pointer\",\n    fontWeight: 600,\n  },\n  dangerBtn: {\n    padding: \"10px 14px\",\n    borderRadius: 10,\n    border: \"1px solid #d33\",\n    background: \"#ffefef\",\n    color: \"#a00\",\n    cursor: \"pointer\",\n    fontWeight: 700,\n  },\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}